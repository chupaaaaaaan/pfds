# Exercise 6.6

## (a)

先頭側リスト `f` に $n$、末尾側リスト `r` に $n$、先頭側リストの接頭辞 `w` に $1$ 個の要素を持ったキュー `q0` に以下の操作を行うことを考える。

1. `q1 = snoc q0 1`
1. `q2 = snoc q0 2`
1. `q3 = snoc q0 3`
1. `q1' = tail q1`
1. `q2' = tail q2`
1. `q3' = tail q3`

`w` が空になるまで遅延計算を進行させない場合、`q1`、`q2`、`q3` を求める際にそれぞれで生成した $2n + 1$ ステップの遅延計算（反転）を、`q1'`、`q2'`、`q3'` を求める際に進行させる必要がある。
生成した負債を返済する機会がないため、償却コストの上限を壊してしまう。

## (b)

先頭側リスト `f` に $n$、末尾側リスト `r` に $0$ の要素を持ったキュー `q0` に以下の操作を行うことを考える。

1. `q0' = iterate tail q0 !! (n - 1)`（`q0` に対する $n-1$ 回の `tail`）
1. `q1 = snoc q0' 1`
1. `q2 = snoc q0' 2`
1. `q3 = snoc q0' 3`
1. `q1' = tail q1`
1. `q2' = tail q2`
1. `q3' = tail q3`

`tail` で遅延計算を生成しない場合、`q1'`、`q2'`、`q3'` を求める時点で、それぞれ $n$ ステップの遅延計算（`tail`）を生成して即座に進行させる必要がある。
生成した負債を返済する機会がないため、償却コストの上限を壊してしまう。
